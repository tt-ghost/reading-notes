# 连接管理

### TCP连接

#### TCP的可靠数据管道

- HTTP 连接实际上就是TCP连接和一些使用连接的规则
- TCP为HTTP提供一条可靠的比特传输管道

#### TCP流是分段的、由IP分组传送

- TCP的数据时通过名为IP分组（或IP数据报）的小数据块来发送的
- HTTP就是 `HTTP over TCP over IP`
- HTTPS就是HTTP和TCP之间插入了一个（称为TLS或SSL的）密码加密层

```
// HTTP 如下

    HTTP    (应用层)
      |
     TCP    (传输层)
      |
     IP     (网络层)
      |
    网络接口 (数据链路层)

// HTTPS 如下

    HTTP    (应用层)
      |
  TSL or SSL(安全层)
      |
     TCP    (传输层)
      |
     IP     (网络层)
      |
    网络接口 (数据链路层)
```

- HTTP以流的形式通过一条打开的TCP连接按序传输。TCP收到数据流后会砍成**段**的小数据块，并将**段**封装在IP分组中
- 每个TCP段都是由IP分组承载，每个IP分组中都包括：
  - 一个IP分组首部（通常为20字节）
  - 一个TCP段首部（通常为20字节）
  - 一个TCP数据块（0个或多个字节）
- IP首部包括了源和目的IP地址、长度和其他一些标记。
- TCP首部包括了TCP端口号、TCP控制标记，以及用于数据排序和完整性检查的一些数据值






